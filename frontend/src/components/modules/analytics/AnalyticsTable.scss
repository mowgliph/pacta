@use '../../../styles/variables' as v;
@use '../../../styles/colors' as c;
@use '../../../styles/mixins' as m;

.analytics-table {
  background-color: c.$color-surface;
  border-radius: v.$border-radius;
  box-shadow: v.$shadow-sm;
  overflow: hidden;
  margin-bottom: v.$spacing-lg;
  
  &.loading {
    opacity: 0.7;
    pointer-events: none;
  }
  
  .table-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: v.$spacing-lg;
    border-bottom: 1px solid c.$color-border;
    
    h3 {
      font-size: v.$font-size-md;
      font-weight: v.$font-weight-semibold;
      margin: 0;
    }
    
    .table-actions {
      display: flex;
      gap: v.$spacing-sm;
      
      .search-filter {
        position: relative;
        
        input {
          padding: v.$spacing-xs calc(v.$spacing-xl + v.$spacing-xxs) v.$spacing-xs v.$spacing-sm;
          border: 1px solid c.$color-border;
          border-radius: v.$border-radius-sm;
          font-size: v.$font-size-sm;
          min-width: 200px;
        }
        
        i {
          position: absolute;
          right: v.$spacing-sm;
          top: 50%;
          transform: translateY(-50%);
          color: c.$color-text-secondary;
        }
      }
      
      .btn-export {
        display: flex;
        align-items: center;
        gap: v.$spacing-xs;
        padding: v.$spacing-xs v.$spacing-sm;
        background-color: c.$color-surface-variant;
        border: none;
        border-radius: v.$border-radius-sm;
        font-size: v.$font-size-sm;
        cursor: pointer;
        
        &:hover {
          background-color: c.$color-surface-hover;
        }
      }
    }
  }
  
  .table-loading,
  .table-error,
  .table-empty {
    padding: v.$spacing-xxl v.$spacing-lg;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    
    i {
      font-size: v.$font-size-xxl;
      margin-bottom: v.$spacing-md;
      color: c.$color-text-secondary;
    }
    
    p {
      margin-bottom: v.$spacing-md;
      color: c.$color-text-secondary;
    }
    
    button {
      padding: v.$spacing-xs v.$spacing-md;
      background-color: c.$color-primary;
      color: white;
      border: none;
      border-radius: v.$border-radius-sm;
      cursor: pointer;
    }
  }
  
  .table-loading {
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid c.$color-surface-variant;
      border-top-color: c.$color-primary;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: v.$spacing-md;
    }
  }
  
  .table-responsive {
    overflow-x: auto;
    
    table {
      width: 100%;
      border-collapse: collapse;
      
      th, td {
        padding: v.$spacing-sm v.$spacing-md;
        text-align: left;
        border-bottom: 1px solid c.$color-border;
        
        &:first-child {
          padding-left: v.$spacing-lg;
        }
        
        &:last-child {
          padding-right: v.$spacing-lg;
        }
      }
      
      th {
        font-weight: v.$font-weight-semibold;
        font-size: v.$font-size-sm;
        color: c.$color-text-primary;
        background-color: c.$color-surface-variant;
        position: relative;
        
        &.sortable {
          cursor: pointer;
          user-select: none;
          
          &:hover {
            background-color: c.$color-surface-hover;
          }
          
          i {
            margin-left: v.$spacing-xs;
            font-size: v.$font-size-xs;
          }
        }
        
        &.sorted {
          background-color: c.$color-surface-hover;
        }
      }
      
      td {
        font-size: v.$font-size-sm;
        color: c.$color-text-primary;
      }
      
      tbody tr {
        &:hover {
          background-color: c.$color-surface-hover;
        }
        
        &.clickable {
          cursor: pointer;
        }
      }
    }
  }
  
  .table-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: v.$spacing-md v.$spacing-lg;
    border-top: 1px solid c.$color-border;
    font-size: v.$font-size-sm;
    
    .pagination-info {
      color: c.$color-text-secondary;
    }
    
    .pagination-controls {
      display: flex;
      align-items: center;
      gap: v.$spacing-xxs;
      
      .btn-page {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 2rem;
        height: 2rem;
        background: none;
        border: 1px solid c.$color-border;
        border-radius: v.$border-radius-sm;
        cursor: pointer;
        
        &:hover:not(:disabled) {
          background-color: c.$color-surface-hover;
        }
        
        &:disabled {
          opacity: 0.5;
          cursor: default;
        }
        
        &.active {
          background-color: c.$color-primary;
          color: white;
          border-color: c.$color-primary;
        }
      }
      
      .page-ellipsis {
        padding: 0 v.$spacing-xs;
      }
    }
    
    .items-per-page {
      display: flex;
      align-items: center;
      gap: v.$spacing-xs;
      
      span {
        color: c.$color-text-secondary;
      }
      
      select {
        padding: v.$spacing-xxs v.$spacing-xs;
        border: 1px solid c.$color-border;
        border-radius: v.$border-radius-sm;
        background-color: c.$color-surface;
      }
    }
  }
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

@media (max-width: v.$breakpoint-md) {
  .analytics-table {
    .table-header {
      flex-direction: column;
      align-items: flex-start;
      gap: v.$spacing-md;
      
      .table-actions {
        width: 100%;
        
        .search-filter {
          flex: 1;
          
          input {
            width: 100%;
            min-width: unset;
          }
        }
      }
    }
    
    .table-footer {
      flex-direction: column;
      gap: v.$spacing-md;
      
      .pagination-info {
        order: 3;
      }
      
      .pagination-controls {
        order: 1;
        width: 100%;
        justify-content: center;
      }
      
      .items-per-page {
        order: 2;
        width: 100%;
        justify-content: center;
      }
    }
  }
} 