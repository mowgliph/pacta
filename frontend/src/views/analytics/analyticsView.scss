@use '../../styles/variables' as v;
@use '../../styles/colors' as c;
@use '../../styles/mixins' as m;

.analytics-view {
  .page-header {
    @include m.flex-between;
    margin-bottom: v.$spacing-xl;
    position: sticky;
    top: 0;
    z-index: 100;
    background-color: c.$color-surface;
    padding: v.$spacing-lg 0;
    border-bottom: 1px solid c.$color-border;

    h1 {
      @include m.heading-1;
      color: c.$color-text-primary;
    }
  }

  .metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: v.$spacing-lg;
    margin-bottom: v.$spacing-xl;
  }

  .metric-card {
    @include m.card-style;
    display: flex;
    align-items: flex-start;
    gap: v.$spacing-md;

    .metric-icon {
      width: 48px;
      height: 48px;
      border-radius: v.$border-radius-md;
      display: flex;
      align-items: center;
      justify-content: center;

      i {
        font-size: v.$font-size-xl;
      }
    }

    .metric-content {
      h3 {
        @include m.text-secondary;
        margin: 0 0 v.$spacing-xs;
      }

      .metric-value {
        @include m.heading-2;
        color: c.$color-text-primary;
        margin: 0 0 v.$spacing-xs;
      }

      .metric-change {
        @include m.text-small;
        display: flex;
        align-items: center;
        gap: v.$spacing-xs;
        margin: 0;

        &.positive {
          color: c.$color-success;
        }

        &.negative {
          color: c.$color-error;
        }
      }
    }
  }

  .charts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: v.$spacing-lg;
    margin-bottom: v.$spacing-xl;
  }

  .chart-card {
    @include m.card-style;

    .card-header {
      @include m.flex-between;
      margin-bottom: v.$spacing-lg;

      h3 {
        @include m.heading-3;
        color: c.$color-text-primary;
        margin: 0;
      }
    }
  }

  .efficiency-stats,
  .compliance-stats {
    .stat-item {
      padding: v.$spacing-md 0;
      border-bottom: 1px solid c.$color-border;

      &:last-child {
        border-bottom: none;
      }

      .stat-label {
        @include m.text-secondary;
        margin-bottom: v.$spacing-xs;
      }

      .stat-value {
        @include m.text-base;
        font-weight: v.$font-weight-medium;
        margin-bottom: v.$spacing-xs;
      }

      .stat-trend {
        @include m.text-small;
        display: flex;
        align-items: center;
        gap: v.$spacing-xs;

        &.up {
          color: c.$color-success;
        }

        &.down {
          color: c.$color-error;
        }
      }
    }
  }
}

// Utility Classes
.btn-outline {
  @include m.button-outline;
}

.btn-icon {
  @include m.button-icon;
}

.btn-text {
  @include m.button-text;
}

@media (max-width: v.$breakpoint-md) {
  .analytics-view {
    .charts-grid {
      grid-template-columns: 1fr;
    }
  }
}